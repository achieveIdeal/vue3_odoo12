import{_ as e}from"./PageHeader.js";import{R as t,c as r,E as a}from"./RecordView.js";import{d as s,r as d,c as o,a as i,F as n,o as _,i as l,b as c}from"./index.js";const p=s({__name:"ShortageProduct",setup(s){const p=parseInt(l("supplier_id")||0),u=d({title:"物料欠料表",name:"shortage_product",domain:[["partner_id","=",p]],model:"shortage.product",fields:["name","partner_id","product_id","production_merge_order","production_order","need_qty","shortage_qty","delivery_qty","order_product","product_name","date","urgency_date","delete_flag","state","delivery_state","in_stock_qty","reply_date"],tables:{}}),m={buttons:[{type:"custom",showType:["list"],text:"创建交货单",classify:"primary",needRow:!0,attributes:{}}],search_fields:{production_order:{},delivery_state:{default:["undone"]},product_id:{noSelect:!0},date:{}},attributes:{},invisible:["urgency_date","delivery_state","delete_flag","state","partner_id"],listInvisible:["urgency_date","delete_flag","state","partner_id","in_stock_qty"]},y=async(e,t,s)=>{const d=t.map((e=>e.id)),o=d instanceof Array?d:[d];s.value=!0;const i=await r({model:u.model,method:"check_can_create_delivery_order",args:[o]});if(i.error)return s.value=!1,a({message:i.error.data.message,type:"error"}),!1;c.push({path:"/delivery_order",query:{id:0,plan_ids:d}})};return(r,a)=>{const s=e;return _(),o(n,null,[i(s,{title:"交货计划"}),i(t,{params:u,extras:m,onCustomClick:y},null,8,["params"])],64)}}});export{p as default};
