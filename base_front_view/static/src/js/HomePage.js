import{u as e,_ as t,r as s}from"./index2.js";import{d as n,o as a,c as i,F as c,r,a as o,t as l,u,b as m,e as p,f as d,g as h,h as _}from"./index.js";const f={class:"menus"},g=["onClick"],v=["src"],b={class:"menu-text"},k=t(n({__name:"RootMenuView",emits:["menuClick"],setup(t,{emit:s}){const n=e().menus.root;return(e,t)=>(a(),i("div",f,[(a(!0),i(c,null,r(u(n).children,(e=>(a(),i("div",{class:"menu-item",type:"success",onClick:t=>(e=>{s("menuClick",e)})(e)},[o("img",{class:"menu-img",src:e.web_icon&&"http://127.0.0.1:8069/"+e.web_icon.replace(",","/")||"http://127.0.0.1:8069/web_enterprise/static/src/img/default_icon_app.png",alt:""},null,8,v),o("div",b,l(e.name),1)],8,g)))),256))]))}}),[["__scopeId","data-v-b89eb195"]]),w=n({__name:"HomePage",setup(t){const n=m(),i=e();let c=k;p({});const r=p(!1),o=p({});i.getMenus().then((e=>{r.value=!0}));const l=e=>{if(e.action){o.value=e,console.log(e);const t=e.action.split(",")[1];n.push({name:"action",query:{action_id:t,parent_id:e.parent_id[0]||e.id,viewType:"tree"}})}else e.children.length&&l(e.children[0])},f=e=>{l(e)};return s("views.xml").then((e=>{const t=(e=>{const t={};return e.forEach((e=>{const{attrs:s,name:n}=e,{id:a,parent:i}=s;t[a]={attrs:s,name:n,children:[]}})),e.forEach((e=>{const{attrs:s,name:n}=e,{id:a,parent:i}=s;if(i){const e=t[i];e&&e.children.push(t[a])}})),Object.values(t).filter((e=>!e.attrs.parent))})(e.filter((e=>"menuitem"===e.tag)));console.log(t),e.filter((e=>"record"===e.tag))})),(e,t)=>r.value?(a(),d(h(u(c)),{key:0,onMenuClick:f},null,32)):_("",!0)}});export{w as default};
