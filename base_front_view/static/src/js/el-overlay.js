import{I as e,J as o,L as t,M as l,g as s,s as a,N as n,O as u,P as d,Q as r,p as c,q as i,d as f,a as p,y as m,R as v,E as y,i as g,v as b,o as h,c as C,h as k,x as w,u as x,t as M,w as E,e as I,n as A,z as B,A as R,S as $,T as F,U as S,f as L,V as D,W as z,X as O,D as _,Y as T,H as P,Z as Y,$ as N,a0 as X,a1 as j,a2 as q,B as V}from"./index.js";import{g as H,t as U,h as W,j as Z,k as J,l as K,m as Q,r as G,P as ee,i as oe,F as te,d as le,_ as se,C as ae,U as ne,u as ue,n as de,o as re,p as ce}from"./RecordView.js";const ie=e=>{if(!e)return{onClick:r,onMousedown:r,onMouseup:r};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},fe=f({name:"ElOverlay",props:c({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:i([String,Array,Object])},zIndex:{type:i([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const l=a("overlay"),{onClick:s,onMousedown:n,onMouseup:u}=ie(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?p("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:n,onMouseup:u},[m(o,"default")],ee.STYLE|ee.CLASS|ee.PROPS,["onClick","onMouseup","onMousedown"]):v("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[m(o,"default")])}}),pe=Symbol("dialogInjectionKey"),me=c({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:oe},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),ve=["aria-label"],ye=["id"],ge=f({name:"ElDialogContent"});var be=se(f({...ge,props:me,emits:{close:()=>!0},setup(s){const a=s,{t:n}=y(),{Close:u}=ae,{dialogRef:d,headerRef:r,bodyId:c,ns:i,style:f}=g(pe),{focusTrapRef:v}=g(te),$=((...o)=>t=>{o.forEach((o=>{e(o)?o(t):o.value=t}))})(v,d),F=b((()=>a.draggable));return((e,s,a)=>{let n={offsetX:0,offsetY:0};const u=o=>{const t=o.clientX,l=o.clientY,{offsetX:s,offsetY:a}=n,u=e.value.getBoundingClientRect(),d=u.left,r=u.top,c=u.width,i=u.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,m=-d+s,v=-r+a,y=f-d-c+s,g=p-r-i+a,b=o=>{const u=Math.min(Math.max(s+o.clientX-t,m),y),d=Math.min(Math.max(a+o.clientY-l,v),g);n={offsetX:u,offsetY:d},e.value.style.transform=`translate(${H(u)}, ${H(d)})`},h=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",h)},d=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",u)};o((()=>{t((()=>{a.value?s.value&&e.value&&s.value.addEventListener("mousedown",u):d()}))})),l((()=>{d()}))})(d,r,F),(e,o)=>(h(),C("div",{ref:x($),class:w([x(i).b(),x(i).is("fullscreen",e.fullscreen),x(i).is("draggable",x(F)),x(i).is("align-center",e.alignCenter),{[x(i).m("center")]:e.center},e.customClass]),style:R(x(f)),tabindex:"-1"},[k("header",{ref_key:"headerRef",ref:r,class:w(x(i).e("header"))},[m(e.$slots,"header",{},(()=>[k("span",{role:"heading",class:w(x(i).e("title"))},M(e.title),3)])),e.showClose?(h(),C("button",{key:0,"aria-label":x(n)("el.dialog.close"),class:w(x(i).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[p(x(le),{class:w(x(i).e("close"))},{default:E((()=>[(h(),I(A(e.closeIcon||x(u))))])),_:1},8,["class"])],10,ve)):B("v-if",!0)],2),k("div",{id:x(c),class:w(x(i).e("body"))},[m(e.$slots,"default")],10,ye),e.$slots.footer?(h(),C("footer",{key:0,class:w(x(i).e("footer"))},[m(e.$slots,"footer")],2)):B("v-if",!0)],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const he=c({...me,appendToBody:{type:Boolean,default:!1},beforeClose:{type:i(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Ce={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>$(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ke=["aria-label","aria-labelledby","aria-describedby"],we=f({name:"ElDialog",inheritAttrs:!1}),xe=V(se(f({...we,props:he,emits:Ce,setup(e,{expose:t}){const l=e,r=_();re({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},b((()=>!!r.title))),re({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},b((()=>!!l.customClass)));const c=a("dialog"),i=L(),f=L(),v=L(),{visible:y,titleId:g,bodyId:C,style:M,overlayDialogStyle:A,rendered:$,zIndex:V,afterEnter:ee,afterLeave:oe,beforeLeave:te,handleClose:le,onModalClick:se,onOpenAutoFocus:ae,onCloseAutoFocus:me,onCloseRequested:ve,onFocusoutPrevented:ye}=((e,t)=>{const l=F().emit,{nextZIndex:r}=S();let c="";const i=ue(),f=ue(),p=L(!1),m=L(!1),v=L(!1),y=L(e.zIndex||r());let g,h;const C=D("namespace",O),k=b((()=>{const o={},t=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=H(e.width))),o})),w=b((()=>e.alignCenter?{display:"flex"}:{}));function x(){null==h||h(),null==g||g(),e.openDelay&&e.openDelay>0?({stop:g}=de((()=>I()),e.openDelay)):I()}function M(){null==g||g(),null==h||h(),e.closeDelay&&e.closeDelay>0?({stop:h}=de((()=>A()),e.closeDelay)):A()}function E(){e.beforeClose?e.beforeClose((function(e){e||(m.value=!0,p.value=!1)})):M()}function I(){W&&(p.value=!0)}function A(){p.value=!1}return e.lockScroll&&((e,o={})=>{s(e)||U("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||a("popup"),l=n((()=>t.bm("parent","hidden")));if(!W||Z(document.body,l.value))return;let r=0,c=!1,i="0";const f=()=>{setTimeout((()=>{G(null==document?void 0:document.body,l.value),c&&document&&(document.body.style.width=i)}),200)};u(e,(e=>{if(!e)return void f();c=!Z(document.body,l.value),c&&(i=document.body.style.width),r=J(t.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,s=K(document.body,"overflowY");r>0&&(o||"scroll"===s)&&c&&(document.body.style.width=`calc(100% - ${r}px)`),Q(document.body,l.value)})),d((()=>f()))})(p),u((()=>e.modelValue),(o=>{o?(m.value=!1,x(),v.value=!0,y.value=e.zIndex?y.value++:r(),z((()=>{l("open"),t.value&&(t.value.scrollTop=0)}))):p.value&&M()})),u((()=>e.fullscreen),(e=>{t.value&&(e?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)})),o((()=>{e.modelValue&&(p.value=!0,v.value=!0,x())})),{afterEnter:function(){l("opened")},afterLeave:function(){l("closed"),l(ne,!1),e.destroyOnClose&&(v.value=!1)},beforeLeave:function(){l("close")},handleClose:E,onModalClick:function(){e.closeOnClickModal&&E()},close:M,doClose:A,onOpenAutoFocus:function(){l("openAutoFocus")},onCloseAutoFocus:function(){l("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&E()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:i,bodyId:f,closed:m,style:k,overlayDialogStyle:w,rendered:v,visible:p,zIndex:y}})(l,i);T(pe,{dialogRef:i,headerRef:f,bodyId:C,ns:c,rendered:$,style:M});const ge=ie(se),he=b((()=>l.draggable&&!l.fullscreen));return t({visible:y,dialogContentRef:v}),(e,o)=>(h(),I(q,{to:"body",disabled:!e.appendToBody},[p(j,{name:"dialog-fade",onAfterEnter:x(ee),onAfterLeave:x(oe),onBeforeLeave:x(te),persisted:""},{default:E((()=>[P(p(x(fe),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":x(V)},{default:E((()=>[k("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:x(g),"aria-describedby":x(C),class:w(`${x(c).namespace.value}-overlay-dialog`),style:R(x(A)),onClick:o[0]||(o[0]=(...e)=>x(ge).onClick&&x(ge).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>x(ge).onMousedown&&x(ge).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>x(ge).onMouseup&&x(ge).onMouseup(...e))},[p(x(ce),{loop:"",trapped:x(y),"focus-start-el":"container",onFocusAfterTrapped:x(ae),onFocusAfterReleased:x(me),onFocusoutPrevented:x(ye),onReleaseRequested:x(ve)},{default:E((()=>[x($)?(h(),I(be,Y({key:0,ref_key:"dialogContentRef",ref:v},e.$attrs,{"custom-class":e.customClass,center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:x(he),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,onClose:x(le)}),N({header:E((()=>[e.$slots.title?m(e.$slots,"title",{key:1}):m(e.$slots,"header",{key:0,close:x(le),titleId:x(g),titleClass:x(c).e("title")})])),default:E((()=>[m(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:E((()=>[m(e.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):B("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ke)])),_:3},8,["mask","overlay-class","z-index"]),[[X,x(y)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]));export{xe as E};
